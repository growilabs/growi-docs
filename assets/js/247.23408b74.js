(window.webpackJsonp=window.webpackJsonp||[]).push([[247],{694:function(e,t,r){"use strict";r.r(t);var a=r(69),s=Object(a.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"デバッグ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#デバッグ"}},[e._v("#")]),e._v(" デバッグ")]),e._v(" "),r("p",[e._v("クライアントサイドコードとサーバーサイドコードのそれぞれに対して、開発で利用できるデバッグの手段および手順を紹介します。")]),e._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#ブラウザーによるデバッグ"}},[e._v("ブラウザーによるデバッグ")])]),r("li",[r("a",{attrs:{href:"#vscode-によるリモートデバッグ"}},[e._v("VSCode によるリモートデバッグ")])])])]),r("p"),e._v(" "),r("h2",{attrs:{id:"ブラウザーによるデバッグ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ブラウザーによるデバッグ"}},[e._v("#")]),e._v(" ブラウザーによるデバッグ")]),e._v(" "),r("p",[e._v("ブラウザーの機能を使うことによって、JS / React のクライアントサイドコードをデバッグできます。")]),e._v(" "),r("h3",{attrs:{id:"chrome"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#chrome"}},[e._v("#")]),e._v(" Chrome")]),e._v(" "),r("ol",[r("li",[e._v("開発用サーバーを起動します。")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://developer.chrome.com/docs/devtools/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome DevTools"),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://developer.chrome.com/docs/devtools/javascript/sources/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Sources panel"),r("OutboundLink")],1),e._v(" を使ってデバッグできます。")]),e._v(" "),r("li",[r("code",[e._v("Ctrl + P")]),e._v(" で TypeScript ファイルを開く場合は、"),r("code",[e._v("webpack://_N_E/")]),e._v(" 配下のファイルを選んでください。")])])])]),e._v(" "),r("img",{attrs:{src:e.$withBase("/assets/images/debugging-chrome-source-panel.png"),alt:"Chrome source panel"}}),e._v(" "),r("h3",{attrs:{id:"firefox"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#firefox"}},[e._v("#")]),e._v(" Firefox")]),e._v(" "),r("ol",[r("li",[e._v("開発用サーバーを起動します。")]),e._v(" "),r("li",[r("a",{attrs:{href:"https://developer.mozilla.org/ja/docs/Learn/Common_questions/What_are_browser_developer_tools",target:"_blank",rel:"noopener noreferrer"}},[e._v("Firefox 開発者ツール"),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://firefox-source-docs.mozilla.org/devtools-user/debugger/",target:"_blank",rel:"noopener noreferrer"}},[e._v("JavaScript Debugger"),r("OutboundLink")],1),e._v(" を使ってデバッグできます。")]),e._v(" "),r("li",[r("code",[e._v("Ctrl + P")]),e._v(" で TypeScript ファイルを開く場合は、少しわかりにくいですが同名のファイルのうち末尾に "),r("code",[e._v("?xxxx")]),e._v(" といったランダムな接尾辞を持つファイルがオリジナルソースです。\n"),r("ul",[r("li",[e._v("或いは左カラムのソースファイルツリーから "),r("code",[e._v("Webpack")]),e._v(" 配下のファイルを選んでください。")])])])])])]),e._v(" "),r("img",{attrs:{src:e.$withBase("/assets/images/debugging-firefox-debugger-panel.png"),alt:"Firefox debugger panel"}}),e._v(" "),r("h2",{attrs:{id:"vscode-によるリモートデバッグ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#vscode-によるリモートデバッグ"}},[e._v("#")]),e._v(" VSCode によるリモートデバッグ")]),e._v(" "),r("p",[e._v("VSCodeでは、クライアントサイドコードとサーバサイドコードの両方をデバッグできます。")]),e._v(" "),r("h3",{attrs:{id:"クライアントサイドコードのデバッグ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#クライアントサイドコードのデバッグ"}},[e._v("#")]),e._v(" クライアントサイドコードのデバッグ")]),e._v(" "),r("p",[e._v("「"),r("a",{attrs:{href:"#%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%83%BC%E3%81%AB%E3%82%88%E3%82%8B%E3%83%87%E3%83%90%E3%83%83%E3%82%B0"}},[e._v("ブラウザーによるデバッグ")]),e._v("」で紹介した機能と同等です。\nVSCode 上で編集しているソースコードに対してブレークポイントを設定できます。")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Chrome")]),e._v(" "),r("ol",[r("li",[e._v("開発用サーバーを起動します。")]),e._v(" "),r("li",[e._v("Run and Debug パネルから「Debug: Chrome」を選択します。")])]),e._v(" "),r("img",{attrs:{src:e.$withBase("/assets/images/debugging-vscode-chrome-debugger.png"),alt:"VSCode Chrome debugger"}})]),e._v(" "),r("li",[r("p",[e._v("Firefox")]),e._v(" "),r("ol",[r("li",[e._v("開発用サーバーを起動します。")]),e._v(" "),r("li",[e._v("Run and Debug パネルから「Debug: Firefox」を選択します。")])]),e._v(" "),r("img",{attrs:{src:e.$withBase("/assets/images/debugging-vscode-firefox-debugger.png"),alt:"VSCode Firefox debugger"}})])]),e._v(" "),r("h3",{attrs:{id:"サーバーサイドコードのデバッグ"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#サーバーサイドコードのデバッグ"}},[e._v("#")]),e._v(" サーバーサイドコードのデバッグ")]),e._v(" "),r("p",[e._v("2種類の方法で開発用サーバーにデバッガーを attach できます。")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("開発用サーバー起動後にデバッガーを attach する")]),e._v(" "),r("ul",[r("li",[r("p",[r("strong",[e._v("特徴: 高速かつ柔軟、開発中の任意のタイミングで attach / dettach できる")])])]),e._v(" "),r("li",[r("p",[e._v("attach 手順:\n1. 予め開発用サーバーを起動します。\n- Ports パネルで "),r("code",[e._v("9229")]),e._v(" ポートのフォワーディングが表示されていることを確認します。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v('    <img :src="$withBase(\'/assets/images/debugging-portforwarding.png\')" alt="Portforwarding">\n\n1. Run and Debug パネルから「Debug: Attach Debugger to Server」を選択します。\n\n<img :src="$withBase(\'/assets/images/debugging-vscode-attach-debugger-to-server-debugger.png\')" alt="VSCode Attach Debugger to Server debugger">\n')])])])])])]),e._v(" "),r("li",[r("p",[e._v("デバッガーを attach したサーバーを起動する")]),e._v(" "),r("ul",[r("li",[r("p",[r("strong",[e._v("特徴: サーバー起動時の処理に対してもブレークポイントを設定できる")])])]),e._v(" "),r("li",[r("p",[e._v("attach 手順:\n1. Run and Debug パネルから「Debug: Server」を選択します。")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",[r("code",[e._v('<img :src="$withBase(\'/assets/images/debugging-vscode-server-debugger.png\')" alt="VSCode Server debugger">\n')])])])])])])]),e._v(" "),r("p",[e._v("attach が正常に完了すると、VSCode のステータスバーの色がオレンジになります。この状態で任意のサーバーサイドコードにブレークポイントを設定してデバッグできます。")]),e._v(" "),r("div",{staticClass:"custom-block tip"},[r("p",{staticClass:"custom-block-title"},[e._v("Unbound breakpoint への対処")]),e._v(" "),r("p",[e._v("ブレークポイントを設定しても Unbound breakpoint になってしまう場合は、以下を確認してください。")]),e._v(" "),r("ul",[r("li",[e._v("Express のコードから import / require されていることを確認してください。")]),e._v(" "),r("li",[r("code",[e._v("packages/app/src/pages")]),e._v(" 配下のファイルの内、拡張子が "),r("code",[e._v("*.page.ts")]),e._v(" のファイルは "),r("a",{attrs:{href:"https://nextjs.org/docs/basic-features/pages",target:"_blank",rel:"noopener noreferrer"}},[e._v("Next.js の Pages Component"),r("OutboundLink")],1),e._v(" です。\nこれらのファイルは開発用サーバー起動直後ではまだコンパイルされていないため、ブレークポイントを設定できません。ブラウザから当該ページへアクセスするなどしてコンパイルしてください。")]),e._v(" "),r("li",[e._v("設定したブレークポイントが有効化されたり無効化(Unbound breakpoint)されたりして不安定な場合は、Node.js プロセスへの "),r("code",[e._v("--nolazy")]),e._v(" オプションの設定を検討してください。\n参考: "),r("a",{attrs:{href:"https://code.visualstudio.com/docs/nodejs/nodejs-debugging#_breakpoint-validation",target:"_blank",rel:"noopener noreferrer"}},[e._v("Breakpoint validation"),r("OutboundLink")],1)])])])])}),[],!1,null,null,null);t.default=s.exports}}]);