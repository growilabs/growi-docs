(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{513:function(t,s,a){"use strict";a.r(s);var e=a(69),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"custom-bot-with-proxy-settings"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-bot-with-proxy-settings"}},[t._v("#")]),t._v(" Custom bot with proxy settings")]),t._v(" "),a("p",[t._v("【Diagram】\n"),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-outline-custom-with-proxy.png"),alt:"diagram-for-custom-bot-with-proxy"}})]),t._v(" "),a("p",[t._v("To deploy a custom bot without proxy in your Slack workspace, you need to create and edit it on the Slack app. The steps are below.")]),t._v(" "),a("h2",{attrs:{id:"create-a-custom-bot-with-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#create-a-custom-bot-with-proxy"}},[t._v("#")]),t._v(" Create a Custom bot with proxy")]),t._v(" "),a("ol",[a("li",[t._v("Go to the "),a("a",{attrs:{href:"https://api.slack.com/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Page"),a("OutboundLink")],1),t._v(" of the Slack API and click "),a("strong",[t._v("Create An App")]),t._v(" button.")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-custom-bot1.png"),alt:"slack-custom-bot1"}}),t._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[t._v("Click "),a("strong",[t._v("From an app manifest")]),t._v(".")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-custom-bot2.png"),alt:"slack-custom-bot2"}}),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Select the workspace where you want to install the app and click "),a("strong",[t._v("Next")]),t._v(".")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-custom-bot3.png"),alt:"slack-custom-bot3"}}),t._v(" "),a("ol",{attrs:{start:"4"}},[a("li",[t._v("Paste the following App Manifest into the [YAML] tab, and click "),a("strong",[t._v("Next")]),t._v(".")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-custom-bot4.png"),alt:"slack-custom-bot4"}}),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("_metadata")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("major_version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("minor_version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("display_information")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GROWI BOT\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("features")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bot_user")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("display_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" GROWI BOT\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("always_online")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("slash_commands")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" /growi\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Slackbot Proxy domain name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/slack/commands\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("description")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Test Bot\n        "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("should_escape")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("unfurl_domains")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("GROWI domain name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("oauth_config")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redirect_urls")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Slackbot Proxy domain name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/slack/oauth_redirect\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scopes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" channels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("history\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" channels"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("join\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("write\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" chat"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("write.public\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" commands\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" groups"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("history\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" im"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("history\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" links"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("read\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" links"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("write\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" mpim"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("history\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" team"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("read\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("settings")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("event_subscriptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("request_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Slackbot Proxy domain name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/slack/events\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("bot_events")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" link_shared\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("interactivity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("is_enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("request_url")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Slackbot Proxy domain name"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("/slack/interactions\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("org_deploy_enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("socket_mode_enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("token_rotation_enabled")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("false")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("After reviewing the app overview, click "),a("strong",[t._v("Create")]),t._v(" to create the app.")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-custom-bot5.png"),alt:"slack-custom-bot5"}}),t._v(" "),a("h2",{attrs:{id:"start-slackbot-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#start-slackbot-proxy"}},[t._v("#")]),t._v(" Start Slackbot Proxy")]),t._v(" "),a("ol",[a("li",[t._v("Create a new file "),a("code",[t._v(".env.development.local")]),t._v(" under "),a("code",[t._v("packages/slackbot-proxy")]),t._v(".")]),t._v(" "),a("li",[t._v("Please input any environment variable "),a("code",[t._v("SERVER_URI")]),t._v(" into the created file above.")])]),t._v(" "),a("p",[t._v("e.g. "),a("code",[t._v("SERVER_URI=http://localhost:8080")])]),t._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[t._v("Additionally, select the bot you created from the "),a("a",{attrs:{href:"https://api.slack.com/apps",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Page"),a("OutboundLink")],1),t._v(" and check the items "),a("code",[t._v("Basic Information")]),t._v(" > "),a("code",[t._v("App Credentials")]),t._v(".")])]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/custom-bot-with-proxy-app-credentials.png"),alt:"custom-bot-with-proxy-app-credentials"}}),t._v(" "),a("p",[t._v("Add "),a("code",[t._v("Client ID")]),t._v(", "),a("code",[t._v("Client Secret")]),t._v(", "),a("code",[t._v("Signing Secret")]),t._v(", "),a("code",[t._v(".env.development.local")]),t._v(" like below:")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("SERVER_URI={ URI Proxy }\nSLACK_CLIENT_ID={ Client ID }\nSLACK_CLIENT_SECRET={ Client Secret }\nSLACK_SIGNING_SECRET={ Signing Secret }\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[a("p",[t._v("Start both the GROWI main server and the proxy server("),a("code",[t._v("slackbot-proxy")]),t._v(")."),a("br"),t._v("\nYou can start the proxy server with "),a("code",[t._v("yarn")]),t._v(" and "),a("code",[t._v("yarn dev")]),t._v(" commands.")])]),t._v(" "),a("li",[a("p",[t._v("Select "),a("strong",[t._v("Custom bot with proxy")]),t._v(" from the Slack Integration section of the admin panel.\n"),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-selecting-custom-bot-with-proxy.png"),alt:"slack-bot-selecting-custom-bot-with-proxy"}})])])]),t._v(" "),a("h2",{attrs:{id:"install-custom-bot-with-proxy-in-your-slack-workspace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#install-custom-bot-with-proxy-in-your-slack-workspace"}},[t._v("#")]),t._v(" Install Custom bot with proxy in your Slack workspace")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("In the Slack App you have just created, go to "),a("strong",[t._v("Settings")]),t._v(" and click "),a("strong",[t._v("Manage distribution")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("When all four items in "),a("strong",[t._v("Share Your App with Other Workspaces")]),t._v(" are checked, press "),a("strong",[t._v("Activate Public Distribution")]),t._v(".")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/activate-public-dist.png"),alt:"activate-public-dist"}})]),t._v(" "),a("li",[a("p",[t._v("Click the "),a("strong",[t._v("Add to Slack")]),t._v(" button on the "),a("strong",[t._v("Embeddable Slack Button")]),t._v(".")])]),t._v(" "),a("li",[a("p",[t._v("In the destination screen, click Allow.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-install-your-app-transition-destination.png"),alt:"slack-bot-install-your-app-transition-destination"}})]),t._v(" "),a("li",[a("p",[t._v("If the message "),a("strong",[t._v("Congratulations!")]),t._v(" is displayed, the installation is complete.")])]),t._v(" "),a("li",[a("p",[t._v("Invite the GROWI bot to the channel you want to use by using @example.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-install-to-workspace-joined-bot.png"),alt:"slack-bot-install-to-workspace-joined-bot"}}),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-install-your-app-introduction-to-channel.png"),alt:"slack-bot-install-your-app-introduction-to-channel"}})])]),t._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),a("p",[t._v("If the message "),a("code",[t._v("Illegal state, try it again.")]),t._v(" is displayed, press "),a("strong",[t._v("Go to install page")]),t._v(", and then click "),a("strong",[t._v("Add to Slack")]),t._v(" button to install again.\nOr, if the message "),a("code",[t._v("GROWI Bot installation failed..")]),t._v(" is displayed, press retry from the "),a("strong",[t._v("Add to Slack")]),t._v(" button.")])]),t._v(" "),a("h2",{attrs:{id:"register-a-custom-bot-with-proxy-service"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#register-a-custom-bot-with-proxy-service"}},[t._v("#")]),t._v(" Register a Custom Bot with Proxy Service")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Open the registration for the GROWI Custom Bot with proxy service.\nYou will see that two access tokens have been generated for the various tokens in the "),a("strong",[t._v("Generate Access Token")]),t._v(" section. Access tokens can be reissued if necessary.")])]),t._v(" "),a("li",[a("p",[t._v("On Slack, type "),a("code",[t._v("/growi register")]),t._v(".")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-growi-register.png"),alt:"slack-bot-growi-register"}}),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-register-modal.png"),alt:"slack-bot-add-workspace"}})]),t._v(" "),a("li",[a("p",[t._v("Save the URL of the target GROWI in the GROWI URL of the displayed modal.")])]),t._v(" "),a("li",[a("p",[t._v("Enter the Access Token Proxy into GROWI and the Access Token GROWI to the Proxy issued above, then click the "),a("strong",[t._v("Submit")]),t._v(" button.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-update-proxy-url.png"),alt:"slack-bot-update-proxy-url"}})])]),t._v(" "),a("p",[t._v("If successful, the URL of the proxy server will be displayed.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-input-proxy-url.png"),alt:"slack-bot-input-proxy-url"}}),t._v(" "),a("p",[t._v("Enter the URL of the proxy server you obtained above into the Proxy URL of "),a("strong",[t._v("Custom Bot With Proxy Integration")]),t._v(" and update it.")]),t._v(" "),a("h2",{attrs:{id:"run-connectivity-test-of-custom-bot-with-proxy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#run-connectivity-test-of-custom-bot-with-proxy"}},[t._v("#")]),t._v(" Run Connectivity Test of Custom Bot with Proxy")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("Click "),a("strong",[t._v("Test connection")]),t._v(" and input the Slack channel to which GROWI-Bot was invited.")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-test-introduction.png"),alt:"slack-bot-test-introduction"}})]),t._v(" "),a("li",[a("p",[t._v("Click on the "),a("strong",[t._v("Test")]),t._v(" button.")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("In case of success\n"),a("strong",[t._v("Successfully sent to Slack workspace.")]),t._v(" will be displayed in Logs.\nGreen checkmarks will appear in red circles. Check the channel to\nwhich your GROWI-Bot was invited.")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("GROWI side")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-test-success.png"),alt:"slack-bot-test-success"}})]),t._v(" "),a("li",[a("p",[t._v("Slack side")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/assets/images/slack-bot-test-success-at-slack-app.png"),alt:"slack-bot-test-success-at-slack-app"}})])])]),t._v(" "),a("li",[a("p",[t._v("In case of failure"),a("br"),t._v("\nSee "),a("RouterLink",{attrs:{to:"/en/admin-guide/management-cookbook/slack-integration/#error-logs-for-connectivity-test"}},[t._v("Error logs for connectivity test")])],1)])]),t._v(" "),a("p",[t._v("Once you are all set up, see "),a("RouterLink",{attrs:{to:"/en/admin-guide/management-cookbook/slack-integration/#check-the-connected-growi"}},[t._v("what you can do with a GROWI-bot")])],1)])}),[],!1,null,null,null);s.default=n.exports}}]);