(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{610:function(t,_,e){"use strict";e.r(_);var a=e(69),v=Object(a.a)({},(function(){var t=this,_=t.$createElement,e=t._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"監査ログのセットアップ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#監査ログのセットアップ"}},[t._v("#")]),t._v(" 監査ログのセットアップ")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/management-cookbook/audit-log.html"}},[t._v("監査ログ")]),t._v("を利用可能な状態にする方法、収集するログについて紹介します。")],1),t._v(" "),e("h2",{attrs:{id:"監査ログを有効にする"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#監査ログを有効にする"}},[t._v("#")]),t._v(" 監査ログを有効にする")]),t._v(" "),e("p",[t._v("監査ログを有効にするには、環境変数 "),e("code",[t._v("AUDIT_LOG_ENABLED")]),t._v(" を "),e("code",[t._v("true")]),t._v(" にします。"),e("code",[t._v("true")]),t._v(" にした時点からログの収集・表示・検索が可能になります。")]),t._v(" "),e("h2",{attrs:{id:"ログの種類"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ログの種類"}},[t._v("#")]),t._v(" ログの種類")]),t._v(" "),e("p",[t._v("GROWI が収集するログは "),e("code",[t._v("SMALL、MEDIUM、LARGE")]),t._v(" の3種類のグループに別れています。デフォルトは "),e("code",[t._v("SMALL")]),t._v(" になっており、環境変数の "),e("code",[t._v("AUDIT_LOG_ACTION_GROUP_SIZE")]),t._v(" から変更可能です。")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th"),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[e("code",[t._v("SMALL")])]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[e("code",[t._v("MEDIUM")])]),t._v(" "),e("th",{staticStyle:{"text-align":"center"}},[e("code",[t._v("LARGE")])])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("ログイン、ログアウト、"),e("br"),t._v("ページの作成、ページの削除")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")])]),t._v(" "),e("tr",[e("td",[t._v("一般ユーザーが行う操作全て"),e("sup",{staticClass:"footnote-ref"},[e("a",{attrs:{href:"#fn1",id:"fnref1"}},[t._v("[1]")])])]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("❌")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")])]),t._v(" "),e("tr",[e("td",[t._v("管理ユーザーが行う操作全て")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("❌")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("❌")]),t._v(" "),e("td",{staticStyle:{"text-align":"center"}},[t._v("⭕️")])])])]),t._v(" "),e("h2",{attrs:{id:"収集するログの-追加-除外"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#収集するログの-追加-除外"}},[t._v("#")]),t._v(" 収集するログの 追加 / 除外")]),t._v(" "),e("p",[e("code",[t._v("AUDIT_LOG_ACTION_GROUP_SIZE")]),t._v(" で設定されたグループに 含まれる / 含まれない アクションを個別に 追加 / 除外 できます。")]),t._v(" "),e("ul",[e("li",[t._v("設定されたグループに含まれないアクションを個別に追加\n"),e("ul",[e("li",[t._v("環境変数 "),e("code",[t._v("AUDIT_LOG_ADDITIONAL_ACTIONS")]),t._v(" に CSV形式（カンマ区切りの文字列）で指定します")]),t._v(" "),e("li",[t._v("例: "),e("code",[t._v("AUDIT_LOG_ADDITIONAL_ACTIONS=PAGE_VIEW,USER_PASSWORD_UPDATE")])])])]),t._v(" "),e("li",[t._v("設定されたグループに含まれるアクションを個別に除外\n"),e("ul",[e("li",[t._v("環境変数 "),e("code",[t._v("AUDIT_LOG_EXCLUDE_ACTIONS")]),t._v(" に CSV形式（カンマ区切りの文字列）で指定します")]),t._v(" "),e("li",[t._v("例: "),e("code",[t._v("AUDIT_LOG_EXCLUDE_ACTIONS=PAGE_CREATE,USER_LOGOUT")])])])])]),t._v(" "),e("h2",{attrs:{id:"対応しているアクション一覧"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#対応しているアクション一覧"}},[t._v("#")]),t._v(" 対応しているアクション一覧")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://github.com/growilabs/growi/blob/master/apps/app/src/interfaces/activity.ts#8",target:"_blank",rel:"noopener noreferrer"}},[t._v("収集できるアクション名"),e("OutboundLink")],1)])]),t._v(" "),e("hr",{staticClass:"footnotes-sep"}),t._v(" "),e("section",{staticClass:"footnotes"},[e("ol",{staticClass:"footnotes-list"},[e("li",{staticClass:"footnote-item",attrs:{id:"fn1"}},[e("p",[t._v("「一般ユーザーが行う操作全て」には、ページ表示("),e("code",[t._v("ACTION_PAGE_VIEW")]),t._v(")は含みません。ページ表示のログを記録したい場合は、別途 "),e("code",[t._v("AUDIT_LOG_ADDITIONAL_ACTIONS")]),t._v(" で個別に追加してください。 "),e("a",{staticClass:"footnote-backref",attrs:{href:"#fnref1"}},[t._v("↩︎")])])])])])])}),[],!1,null,null,null);_.default=v.exports}}]);