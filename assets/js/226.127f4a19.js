(window.webpackJsonp=window.webpackJsonp||[]).push([[226],{673:function(t,a,s){"use strict";s.r(a);var e=s(69),i=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"growi-v7-1-x-へのアップグレード"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#growi-v7-1-x-へのアップグレード"}},[t._v("#")]),t._v(" GROWI v7.1.x へのアップグレード")]),t._v(" "),s("p",[t._v("GROWI v7.1 では GROWI AI 機能が追加され、GROWI を RAG (Retrieval-Augmented Generation) として活用できるようになりました。")]),t._v(" "),s("h2",{attrs:{id:"目次"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目次"}},[t._v("#")]),t._v(" 目次")]),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#目次"}},[t._v("目次")])]),s("li",[s("a",{attrs:{href:"#新機能-growi-ai-ベータ"}},[t._v("[新機能] GROWI AI (ベータ)")])]),s("li",[s("a",{attrs:{href:"#管理者向け"}},[t._v("管理者向け")])]),s("li",[s("a",{attrs:{href:"#開発者向け"}},[t._v("開発者向け")])]),s("li",[s("a",{attrs:{href:"#アップグレード前にチェックすべきこと"}},[t._v("アップグレード前にチェックすべきこと")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"新機能-growi-ai-ベータ"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#新機能-growi-ai-ベータ"}},[t._v("#")]),t._v(" [新機能] GROWI AI (ベータ)")]),t._v(" "),s("p",[t._v("GROWI v7.1.x では、ナレッジベースにおける情報収集と管理の効率化を目的として、"),s("strong",[t._v("GROWI AI 機能")]),t._v(" が新たに追加されました。GROWI AI 機能は、今回搭載したナレッジアシスタントや今後実装予定のベクトル検索など、生成AIを活用した機能群の総称です。\n")]),t._v(" "),s("p",[t._v("今回 GROWI AI 機能群の第一弾として実装された "),s("strong",[t._v("ナレッジアシスタント")]),t._v(" は、チャット形式でユーザーからの質問に対して、GROWI 内の情報をもとに回答を生成する機能です。これにより、ユーザーは必要な情報を迅速かつ効率的に取得できます。")]),t._v(" "),s("p",[t._v("現時点では GROWI AI 機能は OpenAI API と連携しており、"),s("s",[t._v("利用モデルは gpt-4o に固定されています")]),t._v(" (追記されたアップデート情報をご覧ください)。今後のアップデートでは、Azure OpenAI Service との連携、モデルの選択機能、さらには OpenAI 系以外の LLM との連携も計画されています。また、ベクトル検索などの高度な機能も順次追加される予定です。")]),t._v(" "),s("p",[t._v("詳しくは "),s("RouterLink",{attrs:{to:"/ja/guide/features/ai-knowledge-assistant.html"}},[t._v("ナレッジアシスタント")]),t._v(" をご覧ください。")],1),t._v(" "),s("h3",{attrs:{id:"v7-1-2-リリースに伴う追記"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v7-1-2-リリースに伴う追記"}},[t._v("#")]),t._v(" v7.1.2 リリースに伴う追記")]),t._v(" "),s("p",[t._v("v7.1.2 以降で、ナレッジアシスタントで利用するモデルを変更できるようになりました。")]),t._v(" "),s("ul",[s("li",[t._v("デフォルト値が "),s("code",[t._v("gpt-4o-mini")]),t._v(" に変更されました")]),t._v(" "),s("li",[t._v("詳しくは "),s("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/env-vars.html"}},[t._v("環境変数")]),t._v(" ページの "),s("code",[t._v("OPENAI_CHAT_ASSISTANT_MODEL")]),t._v(" を参照してください。")],1)]),t._v(" "),s("h2",{attrs:{id:"管理者向け"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#管理者向け"}},[t._v("#")]),t._v(" 管理者向け")]),t._v(" "),s("ContextualBlock",{attrs:{context:"docs-growi-org"}},[s("h3",{attrs:{id:"廃止-mongodb-4-4-および-5-0-サポートの終了"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#廃止-mongodb-4-4-および-5-0-サポートの終了"}},[t._v("#")]),t._v(" [廃止] MongoDB 4.4 および 5.0 サポートの終了")]),t._v(" "),s("p",[t._v("GROWI v7.1.x ではデータベースとして利用している MongoDB のバージョン 4.4 および 5.0 のサポートを終了しました。該当バージョンを利用しているシステムでは MongoDB 6.0 以上へアップグレードしてください。")])]),t._v(" "),s("h3",{attrs:{id:"仕様変更-aws-s3-利用時の-acl-設定-初期値-の変更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#仕様変更-aws-s3-利用時の-acl-設定-初期値-の変更"}},[t._v("#")]),t._v(" [仕様変更] AWS S3 利用時の ACL 設定(初期値)の変更")]),t._v(" "),s("ContextualBlock",{attrs:{context:"help-growi-cloud"}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("今回の変更は、GROWI.cloud で "),s("RouterLink",{attrs:{to:"/ja/cloud/attachment.html"}},[t._v("添付ファイル保存先")]),t._v(" の設定を "),s("strong",[t._v("【Owned】AWS に設定しているアプリ")]),t._v(" のみが対象です")],1)])]),t._v(" "),s("h4",{attrs:{id:"経緯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#経緯"}},[t._v("#")]),t._v(" 経緯")]),t._v(" "),s("p",[t._v("v7.0.x までの GROWI システムでは AWS S3 へのファイルアップロード時 (PutObject オペレーション時) に "),s("code",[t._v("ACL: 'public-read'")]),t._v(" をオブジェクトに対して設定します。\nこれはフォーク元の Crowi 実装から引き継がれ、後方互換のために長らく維持されていた仕様でしたが、セキュリティの観点から v7.1.x 以降で変更されます。")]),t._v(" "),s("details",[s("summary",[t._v("経緯参考")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://dev.growi.org/5d091f611fe336003eec5bfd",target:"_blank",rel:"noopener noreferrer"}},[t._v("Dev Wiki: /資料/外部仕様/S3のACL設定"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("v7.0.5 での変更\n"),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/growilabs/growi/pull/8778",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/growilabs/growi/pull/8778"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/growilabs/growi/pull/8805",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/growilabs/growi/pull/8805"),s("OutboundLink")],1)])])])])]),t._v(" "),s("h4",{attrs:{id:"変更内容"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#変更内容"}},[t._v("#")]),t._v(" 変更内容")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("バージョン")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("ファイルアップロード時 (PutObject オペレーション時) の挙動")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v7.0.x 以前")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("オブジェクト ACL 設定 "),s("code",[t._v("ACL: 'public-read'")]),t._v(" を付加するリクエスト")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("v7.1.x 以降")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("オブジェクト ACL を設定しないリクエスト")])])])]),t._v(" "),s("h4",{attrs:{id:"添付ファイル閲覧に関する影響"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添付ファイル閲覧に関する影響"}},[t._v("#")]),t._v(" 添付ファイル閲覧に関する影響")]),t._v(" "),s("p",[t._v("古いシステムからアップロードされた添付ファイルにアクセスできなくなる可能性があります。具体的には以下の条件に合致する添付ファイルです。")]),t._v(" "),s("ul",[s("li",[t._v("v3.3.0 以前のシステム利用時にアップロードされた添付ファイル\n"),s("ul",[s("li",[t._v("Markdown 中に記述されている以下のような URL")]),t._v(" "),s("li",[s("code",[t._v("https://${AWS bucket name}.s3.amazonaws.com/attachment/5d091f611fe336003eec5bfd/foobar.jpg")])])])])]),t._v(" "),s("h4",{attrs:{id:"v7-1-x-以降の推奨設定"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v7-1-x-以降の推奨設定"}},[t._v("#")]),t._v(" v7.1.x 以降の推奨設定")]),t._v(" "),s("ul",[s("li",[t._v("AWS 公式の "),s("a",{attrs:{href:"https://docs.aws.amazon.com/ja_jp/AmazonS3/latest/userguide/security-best-practices.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("S3 のベストプラクティス"),s("OutboundLink")],1),t._v(" に則り、バケットの設定を以下のように変更する\n"),s("ul",[s("li",[t._v("S3 バケットの ACL を無効にする")]),t._v(" "),s("li",[t._v("S3 バケットに対するパブリックアクセスをブロック")])])]),t._v(" "),s("li",[t._v("GROWI に対して環境変数 "),s("code",[t._v("S3_OBJECT_ACL=public-read")]),t._v(" を設定している場合は値を "),s("code",[t._v("private")]),t._v(" に変更するか、もしくは設定を削除する")])]),t._v(" "),s("ContextualBlock",{attrs:{context:"docs-growi-org"}},[s("h4",{attrs:{id:"v7-1-x-以降で、s3-バケットの設定を変えずこれまで通りの運用をする場合-非推奨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#v7-1-x-以降で、s3-バケットの設定を変えずこれまで通りの運用をする場合-非推奨"}},[t._v("#")]),t._v(" v7.1.x 以降で、S3 バケットの設定を変えずこれまで通りの運用をする場合 (非推奨)")]),t._v(" "),s("ul",[s("li",[t._v("GROWI に対して環境変数 "),s("code",[t._v("S3_OBJECT_ACL=public-read")]),t._v(" を設定する")])])]),t._v(" "),s("ContextualBlock",{attrs:{context:"docs-growi-org"}},[s("h3",{attrs:{id:"廃止を伴う仕様変更-パッケージマネージャー・タスクランナーの変更"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#廃止を伴う仕様変更-パッケージマネージャー・タスクランナーの変更"}},[t._v("#")]),t._v(" [廃止を伴う仕様変更] パッケージマネージャー・タスクランナーの変更")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://hub.docker.com/r/growilabs/growi/",target:"_blank",rel:"noopener noreferrer"}},[t._v("公式の Docker イメージ"),s("OutboundLink")],1),t._v("を利用しているシステムには影響はありません")])])]),t._v(" "),s("p",[t._v("従来、パッケージマネージャーおよびタスクランナーとして yarn (v1) を利用していましたが、GROWI v7.1 以降で pnpm を採用することとなりました。")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://pnpm.io/installation",target:"_blank",rel:"noopener noreferrer"}},[t._v("pnpm 公式サイトの Installation ページ"),s("OutboundLink")],1),t._v(" を参考にインストールしてください\n"),s("ul",[s("li",[t._v("v9.4 以上のバージョンをインストールしてください")])])]),t._v(" "),s("li",[t._v("yarn コマンドで npm script を実行している箇所は、"),s("code",[t._v("pnpm run")]),t._v(" または "),s("code",[t._v("npm run")]),t._v(" に書き換えてください")])])]),t._v(" "),s("ContextualBlock",{attrs:{context:"docs-growi-org"}},[s("h2",{attrs:{id:"開発者向け"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#開発者向け"}},[t._v("#")]),t._v(" 開発者向け")]),t._v(" "),s("h3",{attrs:{id:"開発環境の更新"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#開発環境の更新"}},[t._v("#")]),t._v(" 開発環境の更新")]),t._v(" "),s("p",[t._v("従来、パッケージマネージャーとして yarn (v1) を利用していましたが、GROWI v7.1 以降で pnpm を採用することとなりました。")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/ja/dev/startup-v6/dev-env.html"}},[t._v("開発スタートアップ v6")]),t._v(" を参考に、開発環境を再構築してください")],1)])]),t._v(" "),s("h2",{attrs:{id:"アップグレード前にチェックすべきこと"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#アップグレード前にチェックすべきこと"}},[t._v("#")]),t._v(" アップグレード前にチェックすべきこと")]),t._v(" "),s("ContextualBlock",{attrs:{context:"docs-growi-org"}},[s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" MongoDB 4.4 および 5.0 を利用しているシステムか")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" ファイルアップロードの方式として AWS S3 を指定しているシステムか\n"),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" アクセス不能になる可能性のある添付ファイルついて、対応を検討したか\n"),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" S3 バケットの設定を見直したか")]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" 環境変数 "),s("code",[t._v("S3_OBJECT_ACL")]),t._v(" の設定を削除、もしくは新たな値の設定をしたか")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" ユーザーに周知したか")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" 公式の Docker イメージを使用しているか\n"),s("ul",[s("li",[t._v("ビルドおよび起動時に "),s("code",[t._v("yarn")]),t._v(" コマンドを使用しているか")])])])])]),t._v(" "),s("ContextualBlock",{attrs:{context:"help-growi-cloud"}},[s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" 添付ファイルのアップロード先として 【Owned】AWS を選択しているアプリを運用しているか\n"),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" アクセス不能になる可能性のある添付ファイルついて、対応を検討したか\n"),s("ul",{staticClass:"contains-task-list"},[s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" S3 バケットの設定を見直したか")])])]),t._v(" "),s("li",{staticClass:"task-list-item"},[s("input",{staticClass:"task-list-item-checkbox",attrs:{checked:"",disabled:"",type:"checkbox"}}),t._v(" ユーザーに周知したか")])])])])])],1)}),[],!1,null,null,null);a.default=i.exports}}]);