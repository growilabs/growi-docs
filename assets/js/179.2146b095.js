(window.webpackJsonp=window.webpackJsonp||[]).push([[179],{626:function(t,a,e){"use strict";e.r(a);var s=e(69),r=Object(s.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"centos"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos"}},[t._v("#")]),t._v(" CentOS")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("この記事は公開されてから時間が経っています。")])]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#概要"}},[t._v("概要")])]),e("li",[e("a",{attrs:{href:"#node-js-8-x-npm-のインストール"}},[t._v("node.js 8.x & npm のインストール")])]),e("li",[e("a",{attrs:{href:"#elasticsearch"}},[t._v("Elasticsearch")])]),e("li",[e("a",{attrs:{href:"#mongodb"}},[t._v("MongoDB")])]),e("li",[e("a",{attrs:{href:"#growi"}},[t._v("GROWI")])]),e("li",[e("a",{attrs:{href:"#リバースプロキシの設定"}},[t._v("リバースプロキシの設定")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"概要"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),e("p",[t._v("この章ではCentOS 7にGROWIをインストールする方法を紹介します。CentOS 6は現在未検証です。")]),t._v(" "),e("p",[t._v("セットアップに必要となるソフトウェアは以下の通りです。")]),t._v(" "),e("ul",[e("li",[t._v("node.js 8.x (DO NOT USE 9.x)")]),t._v(" "),e("li",[t._v("npm 6.x")]),t._v(" "),e("li",[t._v("yarn")]),t._v(" "),e("li",[t._v("MongoDB 3.x")]),t._v(" "),e("li",[t._v("(Optional) Elasticsearch 5.x")]),t._v(" "),e("li",[t._v("(Optional) systemd")]),t._v(" "),e("li",[t._v("(Optional) Apache or nginx")])]),t._v(" "),e("p",[t._v("Optional となっているものは必須ではありません。ただし、本項ではこれら全てを利用し、全文検索できる GROWI を Apache or nginx でリバースプロキシする環境を構築し、systemd でホストと同時に起動させる方法を説明します。\n")]),t._v(" "),e("h2",{attrs:{id:"node-js-8-x-npm-のインストール"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#node-js-8-x-npm-のインストール"}},[t._v("#")]),t._v(" node.js 8.x & npm のインストール")]),t._v(" "),e("h3",{attrs:{id:"nodesource-repository-を利用する"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nodesource-repository-を利用する"}},[t._v("#")]),t._v(" NodeSource repository を利用する")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://rpm.nodesource.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://rpm.nodesource.com/"),e("OutboundLink")],1),t._v("からNode.js のインストールスクリプトを取得します。作業ディレクトリはホームディレクトリです。\n")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ cd ~\n$ curl -sL https://rpm.nodesource.com/setup_8.x -o nodesource_setup.sh\n")])])]),e("p",[t._v("取得したスクリプトを実行します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo bash nodesource_setup.sh\n")])])]),e("p",[t._v("これにより "),e("code",[t._v("yum")]),t._v(" 経由で node.js が取得できるようになったので、 "),e("code",[t._v("yum")]),t._v(" コマンドでインストールを行います。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install -y nodejs\n")])])]),e("p",[t._v("GROWI では yarn を用いたパッケージインストールを利用するため、ここで "),e("code",[t._v("yarn")]),t._v(" コマンドをインストールしておきます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ curl -sL https://dl.yarnpkg.com/rpm/yarn.repo | sudo tee /etc/yum.repos.d/yarn.repo\n$ sudo yum install -y yarn\n")])])]),e("p",[t._v("Node.js, npm, yarn のインストールが完了したら、インストールしたバージョンを確認しましょう。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ node -v\nv8.15.1\n$ npm -v\n6.4.1\n$ yarn -v\n1.15.2\n")])])]),e("h2",{attrs:{id:"elasticsearch"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch"}},[t._v("#")]),t._v(" Elasticsearch")]),t._v(" "),e("h3",{attrs:{id:"インストール"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#インストール"}},[t._v("#")]),t._v(" インストール")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/reference/current/rpm.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("公式ページ"),e("OutboundLink")],1),t._v(" に従い、インストールを進めます。 ここでは Elasticsearch 5.x をインストールするために若干の修正をしています。")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("このドキュメントは古くなっています。現在の GROWI がサポートする Elasticsearch の最新版は 6.x 系です (2019年05月時点)")])]),t._v(" "),e("p",[t._v("まず、 Elasticsearch を実行できるように JDK8 をインストールします。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install java-1.8.0-openjdk\n")])])]),e("p",[t._v("パッケージをインストールするために、Elasticsearch レポジトリの GPG キーを追加します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo rpm --import https://artifacts.elastic.co/GPG-KEY-elasticsearch\n")])])]),e("p",[t._v("Elasticsearch のレポジトリを追加します。以下の内容を"),e("code",[t._v("/etc/yum.repos.d/elasticsearch.repo")]),t._v(" に書き込みます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[elasticsearch-5.x]\nname=Elasticsearch repository for 5.x packages\nbaseurl=https://artifacts.elastic.co/packages/5.x/yum\ngpgcheck=1\ngpgkey=https://artifacts.elastic.co/GPG-KEY-elasticsearch\nenabled=1\nautorefresh=1\ntype=rpm-md\n")])])]),e("p",[t._v("これで、yum 経由で Elasticsearch がインストールできるようになったため、インストールを行います。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install -y elasticsearch\n")])])]),e("p",[t._v("インストールが完了したら、Elasticsearch に割り当てるメモリを調整します。メモリの割り当ては個人ユースであれば 256MB で十分です。チーム規模、ページの量に応じて変更してください。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo vim /etc/elasticsearch/jvm.options\n# 編集前\n-Xms2g\n-Xmx2g\n\n# 編集後\n-Xms256m\n-Xmx256m\n")])])]),e("p",[t._v("インストールが完了したら、 パッケージのバージョンを確認します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ yum list installed | grep elasticsearch\nelasticsearch.noarch                 5.6.16-1                        @elasticsearch-5.x\n")])])]),e("p",[e("code",[t._v("systemctl")]),t._v(" コマンドを使って、Elasticsearch を起動します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl start elasticsearch\n")])])]),e("p",[t._v("elsticsearch の自動起動設定を有効化します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl enable elasticsearch\n")])])]),e("p",[t._v("正常に起動しているか確認します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl status elasticsearch\n")])])]),e("h3",{attrs:{id:"growi-に必要な-elasticsearch-プラグインのインストール"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#growi-に必要な-elasticsearch-プラグインのインストール"}},[t._v("#")]),t._v(" GROWI に必要な Elasticsearch プラグインのインストール")]),t._v(" "),e("p",[t._v("以下の Elasticsearch plugin をインストールします。")]),t._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-kuromoji.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Japanese (kuromoji) Analysis plugin"),e("OutboundLink")],1)]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.elastic.co/guide/en/elasticsearch/plugins/current/analysis-icu.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ICU Analysis Plugin"),e("OutboundLink")],1)])]),t._v(" "),e("p",[t._v("まずは、Elasticsearch plugin をインストールするために利用するコマンドを検索します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ rpm -ql elasticsearch | grep bin | grep plugin\n/usr/share/elasticsearch/bin/elasticsearch-plugin\n")])])]),e("p",[t._v("上記で出力されたコマンドを利用して、 analysis-kuromoji plugin と analysis-icu plugin をインストールします。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("# analysis-kuromoji のインストール\n$ sudo /usr/share/elasticsearch/bin/elasticsearch-plugin install analysis-kuromoji\n\n# analysis-icu plugin のインストール\n$ sudo /usr/share/elasticsearch/bin/elasticsearch-plugin install analysis-icu\n")])])]),e("h2",{attrs:{id:"mongodb"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mongodb"}},[t._v("#")]),t._v(" MongoDB")]),t._v(" "),e("h3",{attrs:{id:"インストール-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#インストール-2"}},[t._v("#")]),t._v(" インストール")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://docs.mongodb.com/v3.6/tutorial/install-mongodb-on-red-hat/",target:"_blank",rel:"noopener noreferrer"}},[t._v("公式ページ"),e("OutboundLink")],1),t._v(" に従ってインストールを実施します。 バージョンは、MongoDB 3.6 です。")]),t._v(" "),e("p",[t._v("レポジトリを追加します。 "),e("code",[t._v("/etc/yum.repos.d/mongodb-org-3.6.repo")]),t._v(" を作成し、以下の内容を書き込みます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[mongodb-org-3.6]\nname=MongoDB Repository\nbaseurl=https://repo.mongodb.org/yum/redhat/$releasever/mongodb-org/3.6/x86_64/\ngpgcheck=1\nenabled=1\ngpgkey=https://www.mongodb.org/static/pgp/server-3.6.asc\n")])])]),e("p",[t._v("これで、yum 経由で MongoDB がインストールできるようになったため、インストールを行います。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install -y mongodb-org\n")])])]),e("p",[t._v("インストールが完了したら、 パッケージのバージョンを確認します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ yum list installed | grep mongodb\nmongodb-org.x86_64                   3.6.11-1.el7               @mongodb-org-3.6\nmongodb-org-mongos.x86_64            3.6.11-1.el7               @mongodb-org-3.6\nmongodb-org-server.x86_64            3.6.11-1.el7               @mongodb-org-3.6\nmongodb-org-shell.x86_64             3.6.11-1.el7               @mongodb-org-3.6\nmongodb-org-tools.x86_64             3.6.11-1.el7               @mongodb-org-3.6\n")])])]),e("p",[e("code",[t._v("systemctl")]),t._v(" コマンドを使って、MongoDB を起動します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl start mongod\n")])])]),e("p",[t._v("MongoDB の自動起動設定を有効化します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl enable mongod\n")])])]),e("p",[t._v("正常に起動しているか確認します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl status mongod\n")])])]),e("h2",{attrs:{id:"growi"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#growi"}},[t._v("#")]),t._v(" GROWI")]),t._v(" "),e("h3",{attrs:{id:"インストール-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#インストール-3"}},[t._v("#")]),t._v(" インストール")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/growilabs/growi",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/growilabs/growi"),e("OutboundLink")],1),t._v(" からソースコードを取得し、"),e("a",{attrs:{href:"https://github.com/growilabs/growi/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/growilabs/growi/releases"),e("OutboundLink")],1),t._v(" にて、最新の安定版のバージョンを確認します。")]),t._v(" "),e("p",[t._v("ここでは "),e("code",[t._v("/opt/growi")]),t._v(" 配下にインストールする手順を記載しています。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo mkdir -p /opt/\n$ cd /opt/\n$ sudo git clone https://github.com/growilabs/growi /opt/growi\n$ cd /opt/growi\n\n# タグの確認\n$ sudo git tag -l\n...\nv3.3.7\nv3.3.8\nv3.3.9\nv3.4.0\nv3.4.1\nv3.4.2\n...\n\n# RC がついていない最新版を利用\n$ sudo git checkout -b v3.4.2 refs/tags/v3.4.2\n")])])]),e("p",[t._v("ソースコードを clone した後に、"),e("code",[t._v("yarn")]),t._v(" コマンドを利用して、 GROWI に必要なパッケージをインストールします。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ cd /opt/growi\n$ sudo yarn\n")])])]),e("h3",{attrs:{id:"起動確認"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#起動確認"}},[t._v("#")]),t._v(" 起動確認")]),t._v(" "),e("p",[t._v("パッケージのインストールが完了したら、起動確認を行います。")]),t._v(" "),e("p",[t._v("ここでは MongoDB と Elasticsearch が同一ホストで稼働していることを前提としています。")]),t._v(" "),e("p",[e("code",[t._v("MONGO_URI")]),t._v(" と "),e("code",[t._v("ELASTICSEARCH_URI")]),t._v(" は環境に合わせて適宜書き換えてください。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo \\\nMONGO_URI=mongodb://localhost:27017/growi \\\nELASTICSEARCH_URI=http://localhost:9200/growi \\\nnpm start\n\n...\n# 以下のメッセージが表示されるまでしばらく待つ\n> growi@3.1.9 server:prod /opt/growi\n> env-cmd config/env.prod.js node app.js\n")])])]),e("p",[e("code",[t._v("http://<hostname or ip address>:3000/")]),t._v(" にアクセスし、初回セットアップ画面が表示されることを確認します。")]),t._v(" "),e("h3",{attrs:{id:"systemd-による自動起動の設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#systemd-による自動起動の設定"}},[t._v("#")]),t._v(" systemd による自動起動の設定")]),t._v(" "),e("p",[t._v("「"),e("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/launch-with-systemd.html"}},[t._v("systemd による自動起動")]),t._v("」を参照してください。")],1),t._v(" "),e("h2",{attrs:{id:"リバースプロキシの設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#リバースプロキシの設定"}},[t._v("#")]),t._v(" リバースプロキシの設定")]),t._v(" "),e("p",[t._v("ここでは、起動した GROWI に対してリバースプロキシを行うための設定例を記載します。")]),t._v(" "),e("h3",{attrs:{id:"apache"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#apache"}},[t._v("#")]),t._v(" Apache")]),t._v(" "),e("h4",{attrs:{id:"インストール-4"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#インストール-4"}},[t._v("#")]),t._v(" インストール")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install httpd\n")])])]),e("h4",{attrs:{id:"リバースプロキシの設定例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#リバースプロキシの設定例"}},[t._v("#")]),t._v(" リバースプロキシの設定例")]),t._v(" "),e("p",[t._v("ここではリバースプロキシに関する箇所を抜粋して記載しています。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("&lt;IfModule mod_ssl.c>\n  &lt;VirtualHost _default_:443>\n    ...\n    ###\n    # reverse proxy to crowi\n    # Header に Host: example.com を追加するため\n    ProxyPreserveHost On\n    # HTTPS利用時: Header に x-forwarded-proto: https を追加するため\n    RequestHeader set x-forwarded-proto 'https'\n    # Apache では static assets で 304 が返らないことがあるので ETag を無効化する\n    &lt;ifModule mod_headers.c>\n            Header unset ETag\n    &lt;/ifModule>\n    FileETag None\n\n    # socket.io の path を rewrite する\n    RewriteEngine On\n    RewriteCond %{REQUEST_URI}  ^/socket.io            [NC]\n    RewriteCond %{QUERY_STRING} transport=websocket    [NC]\n    RewriteRule /(.*) ws://localhost:3000/$1 [P,L]\n\n    ProxyPass / http://localhost:3000/\n    ProxyPassReverse / http://localhost:3000/\n    ...\n  &lt;/VirtualHost>\n&lt;/IfModule>\n")])])]),e("h4",{attrs:{id:"自動起動の設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自動起動の設定"}},[t._v("#")]),t._v(" 自動起動の設定")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl enable httpd\n")])])]),e("h3",{attrs:{id:"nginx-のインストールと設定"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-のインストールと設定"}},[t._v("#")]),t._v(" Nginx のインストールと設定")]),t._v(" "),e("h4",{attrs:{id:"インストール-5"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#インストール-5"}},[t._v("#")]),t._v(" インストール")]),t._v(" "),e("p",[t._v("nginx のレポジトリを追加します。"),e("code",[t._v("/etc/yum.repos.d/nginx.repo")]),t._v("を作成し、以下の内容を書き込みます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("[nginx]\nname=nginx repo\nbaseurl=http://nginx.org/packages/centos/$releasever/$basearch/\ngpgcheck=0\nenabled=1\n")])])]),e("p",[t._v("これで、yum 経由で nginx がインストールできるようになったため、インストールを行います。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo yum install -y nginx\n")])])]),e("h4",{attrs:{id:"リバースプロキシの設定例-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#リバースプロキシの設定例-2"}},[t._v("#")]),t._v(" リバースプロキシの設定例")]),t._v(" "),e("p",[e("code",[t._v("/etc/nginx/conf.d/growi.conf")]),t._v(" のようなファイルを作成し、設定を書き込みます。\nここでは HTTPS を利用する設定例を記載しています。 <server> など<>で囲まれている箇所は、適宜環境に合わせて設定してください。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("upstream growi {\n    server localhost:3000;\n}\n\nmap $http_upgrade $connection_upgrade {\n    default Upgrade;\n    ''      close;\n}\n\nserver {\n    listen 443 ssl spdy;\n    server_name &lt;server>;\n    ssl_certificate &lt;cert_file>;\n    ssl_certificate_key &lt;key_file>;\n\n    location / {\n        proxy_set_header Host $host;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_set_header X-Forwarded-Port $server_port;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_pass http://growi;\n        proxy_http_version 1.1;\n        proxy_set_header Upgrade $http_upgrade;\n        proxy_set_header Connection $connection_upgrade;\n        proxy_read_timeout 900s;\n    }\n}\n\nserver {\n    listen 80;\n    server_name &lt;server>;\n    return 301 https://$server_name$request_uri;\n}\n")])])]),e("h4",{attrs:{id:"自動起動の設定-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#自動起動の設定-2"}},[t._v("#")]),t._v(" 自動起動の設定")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("$ sudo systemctl enable nginx\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);