(window.webpackJsonp=window.webpackJsonp||[]).push([[180],{627:function(t,a,e){"use strict";e.r(a);var o=e(69),s=Object(o.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose"}},[t._v("#")]),t._v(" docker-compose")]),t._v(" "),e("p"),e("div",{staticClass:"table-of-contents"},[e("ul",[e("li",[e("a",{attrs:{href:"#概要"}},[t._v("概要")])]),e("li",[e("a",{attrs:{href:"#growi-docker-compose-のダウンロード"}},[t._v("growi-docker-compose　のダウンロード")])]),e("li",[e("a",{attrs:{href:"#growi-の起動確認"}},[t._v("GROWI の起動確認")])]),e("li",[e("a",{attrs:{href:"#localhost-以外からのアクセス"}},[t._v("localhost 以外からのアクセス")])]),e("li",[e("a",{attrs:{href:"#elasticsearch-のメモリ容量を変更"}},[t._v("Elasticsearch のメモリ容量を変更")])]),e("li",[e("a",{attrs:{href:"#growi-のアップグレード"}},[t._v("GROWI のアップグレード")])]),e("li",[e("a",{attrs:{href:"#関連ページ"}},[t._v("関連ページ")])])])]),e("p"),t._v(" "),e("h2",{attrs:{id:"概要"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#概要"}},[t._v("#")]),t._v(" 概要")]),t._v(" "),e("p",[t._v("この章では docker-compose を用いて GROWI を立ち上げる方法を紹介します。")]),t._v(" "),e("p",[t._v("セットアップには以下のソフトウェアが必要となるため、事前にインストールしてください。")]),t._v(" "),e("ul",[e("li",[t._v("Docker")]),t._v(" "),e("li",[t._v("docker-compose")])]),t._v(" "),e("h2",{attrs:{id:"growi-docker-compose-のダウンロード"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#growi-docker-compose-のダウンロード"}},[t._v("#")]),t._v(" growi-docker-compose　のダウンロード")]),t._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/growilabs/growi-docker-compose",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/growilabs/growi-docker-compose"),e("OutboundLink")],1),t._v(" の「Clone or download」ボタンから、ソースコードをダウンロードもしくは git コマンドにより clone します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git clone https://github.com/growilabs/growi-docker-compose.git growi\n")])])]),e("h2",{attrs:{id:"growi-の起動確認"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#growi-の起動確認"}},[t._v("#")]),t._v(" GROWI の起動確認")]),t._v(" "),e("p",[t._v("ダウンロードしたフォルダ内にて以下のコマンドを実行します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd growi\ndocker-compose up\n")])])]),e("p",[e("code",[t._v("http://localhost:3000/")]),t._v(" にアクセスし、初回セットアップ画面("),e("code",[t._v("/installer")]),t._v(")の表示が確認できれば GROWI 起動完了です。")]),t._v(" "),e("h2",{attrs:{id:"localhost-以外からのアクセス"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#localhost-以外からのアクセス"}},[t._v("#")]),t._v(" localhost 以外からのアクセス")]),t._v(" "),e("p",[e("code",[t._v("docker-compose.yml")]),t._v(" ファイル内の "),e("code",[t._v("ports")]),t._v(" を変更することで "),e("code",[t._v("localhost")]),t._v(" 以外からのアクセスを許可できます。")]),t._v(" "),e("ul",[e("li",[t._v("変更前")])]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("services:\n  app:\n    ports:\n      - 127.0.0.1:3000:3000\n")])])]),e("ul",[e("li",[t._v("変更後")])]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("services:\n  app:\n    ports:\n      - 3000:3000\n")])])]),e("h2",{attrs:{id:"elasticsearch-のメモリ容量を変更"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#elasticsearch-のメモリ容量を変更"}},[t._v("#")]),t._v(" Elasticsearch のメモリ容量を変更")]),t._v(" "),e("p",[t._v("メモリに十分な空き容量がある場合、"),e("code",[t._v("docker-compose.yml")]),t._v(" ファイル内の "),e("code",[t._v("ES_JAVA_OPTS")]),t._v(" の値を変更することで、Elasticsearch のヒープ領域を増やすことができます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v('environment:\n  - "ES_JAVA_OPTS=-Xms2g -Xmx2g"\n')])])]),e("h2",{attrs:{id:"growi-のアップグレード"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#growi-のアップグレード"}},[t._v("#")]),t._v(" GROWI のアップグレード")]),t._v(" "),e("h3",{attrs:{id:"アップグレードガイドの確認"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#アップグレードガイドの確認"}},[t._v("#")]),t._v(" アップグレードガイドの確認")]),t._v(" "),e("p",[t._v("以下のページで、v3.3.x 以下の GROWI を利用してる人向けに v3.4.x へのアップグレードの手順を説明しています。")]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/upgrading/34x.html"}},[t._v("GROWI v3.4.x へのアップグレード")])],1),t._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[t._v("DANGER")]),t._v(" "),e("p",[t._v("その他のバージョンのアップグレードに於いても、まずはアップグレードガイドを確認してください。")])]),t._v(" "),e("h3",{attrs:{id:"コンテナのアップグレード"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#コンテナのアップグレード"}},[t._v("#")]),t._v(" コンテナのアップグレード")]),t._v(" "),e("p",[e("code",[t._v("growi-docker-compose")]),t._v(" をダウンロードしたフォルダにて、コンテナを停止します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("cd growi\ndocker-compose stop\n")])])]),e("p",[t._v("既存の Docker コンテナと Docker イメージを削除します。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("docker-compose rm app mongo elasticsearch\ndocker rmi growilabs/growi:7\n")])])]),e("p",[t._v("最新版を pull し、Docker イメージを作成した後、コンテナを立ち上げます。")]),t._v(" "),e("div",{staticClass:"language-text extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[t._v("git pull\ndocker-compose build\ndocker-compose up\n")])])]),e("p",[t._v("起動後、GROWI App の管理画面の全文検索管理ページ( "),e("code",[t._v("/admin/search")]),t._v(" )で、インデックスを再構築してください。")]),t._v(" "),e("h2",{attrs:{id:"関連ページ"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#関連ページ"}},[t._v("#")]),t._v(" 関連ページ")]),t._v(" "),e("ul",[e("li",[t._v("複数の GROWI を立ち上げる")])]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/multi-app.html"}},[t._v("growi-docker-compose Multiple Sites Example を利用した複数 app の起動手順")])],1),t._v(" "),e("ul",[e("li",[t._v("HTTPS プロキシを利用する")])]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/lets-encrypt.html"}},[t._v("growi-docker-compose with HTTPS proxy Example を利用した HTTPS プロキシの利用手順")])],1),t._v(" "),e("ul",[e("li",[t._v("MongoDB にページデータとユーザーデータのバックアップをとる")])]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/mongodb-backup-regular.html#manage-with-docker-compose"}},[t._v("growi-docker-compose with backup MongoDB container example を利用した MongoDB へのバックアップ作成手順")])],1),t._v(" "),e("ul",[e("li",[t._v("HackMD による同時多人数編集を利用する")])]),t._v(" "),e("p",[e("RouterLink",{attrs:{to:"/ja/admin-guide/admin-cookbook/integrate-with-hackmd.html#既存の-hackmd-codimd-と連携する"}},[t._v("HackMD(CodiMD) Integration Example を利用した HackMD 統合")])],1)])}),[],!1,null,null,null);a.default=s.exports}}]);