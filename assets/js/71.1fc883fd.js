(window.webpackJsonp=window.webpackJsonp||[]).push([[71],{519:function(s,t,e){"use strict";e.r(t);var n=e(69),a=Object(n.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"migrate-from-crowi-plus-docker-compose"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#migrate-from-crowi-plus-docker-compose"}},[s._v("#")]),s._v(" Migrate from crowi-plus-docker-compose")]),s._v(" "),e("div",{staticClass:"custom-block danger"},[e("p",{staticClass:"custom-block-title"},[s._v("DANGER")]),s._v(" "),e("p",[s._v("DO NOT EDIT "),e("code",[s._v("docker-compose.yml")]),s._v(". Only edit "),e("code",[s._v("Dockerfile")]),s._v(".")])]),s._v(" "),e("h2",{attrs:{id:"dockerfile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#dockerfile"}},[s._v("#")]),s._v(" Dockerfile")]),s._v(" "),e("ol",[e("li",[s._v("Edit the line of "),e("code",[s._v("FROM")]),s._v(" and "),e("code",[s._v("ENV APP_DIR")]),s._v(".\n"),e("ul",[e("li",[e("p",[e("strong",[s._v("Before")])]),s._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" weseek/crowi-plus:2")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" APP_DIR /opt/crowi-plus")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("After")])]),s._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" growilabs/growi:7")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ENV")]),s._v(" APP_DIR /opt/growi")]),s._v("\n")])])])])])]),s._v(" "),e("li",[s._v("Because GROWI includes lsx plugin and pukiwiki-like-linker plugin in GROWI official image by default, comment out or delete the lines below.\n"),e("ul",[e("li",[e("p",[e("strong",[s._v("Before")])]),s._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install plugins if necessary")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token instruction"}},[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"install plugins"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("\\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  && npm install --save \\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      crowi-plugin-lsx \\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      crowi-plugin-pukiwiki-like-linker \\")]),s._v("\n    && echo "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"done."')])]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you must rebuild if install plugin at least one")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RUN npm run build:prod")]),s._v("\n")])])])]),s._v(" "),e("li",[e("p",[e("strong",[s._v("After")])]),s._v(" "),e("div",{staticClass:"language-docker extra-class"},[e("pre",{pre:!0,attrs:{class:"language-docker"}},[e("code",[s._v("  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# install plugins if necessary")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;; NOTE: In GROWI v3 and later,")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       2 of official plugins (growi-plugin-lsx and growi-plugin-pukiwiki-like-linker)")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       are now included in the 'growilabs/growi' image.")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;       Therefore you will not need following lines except when you install third-party plugins.")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ;;")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#RUN echo "install plugins" \\')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  && yarn add \\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      growi-plugin-XXX \\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#      growi-plugin-YYY \\")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#  && echo "done."')]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you must rebuild if install plugin at least one")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#RUN npm run build:prod")]),s._v("\n")])])])])])])]),s._v(" "),e("h2",{attrs:{id:"start"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#start"}},[s._v("#")]),s._v(" Start")]),s._v(" "),e("ol",[e("li",[e("code",[s._v("docker-compose up")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);