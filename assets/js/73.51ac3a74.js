(window.webpackJsonp=window.webpackJsonp||[]).push([[73],{519:function(e,t,a){"use strict";a.r(t);var r=a(69),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"upgrading-growi-to-v3-4-x"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrading-growi-to-v3-4-x"}},[e._v("#")]),e._v(" Upgrading GROWI to v3.4.x")]),e._v(" "),a("p",[e._v("v3.4 uses different versions about Node.js and middlewares as below.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[e._v("GROWI")]),e._v(" "),a("th",{staticStyle:{"text-align":"center"}},[e._v("<= v3.3.x")]),e._v(" "),a("th",{staticStyle:{"text-align":"center"}},[e._v("v3.4.x")])])]),e._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("Node.js")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("v8")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("v10")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("MongoDB")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("3.4")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("3.6")])]),e._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[e._v("Elasticsearch")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("5.3")]),e._v(" "),a("td",{staticStyle:{"text-align":"center"}},[e._v("6.6")])])])]),e._v(" "),a("p",[e._v("Also, the docker image that is used by "),a("a",{attrs:{href:"https://github.com/growilabs/growi-docker-compose",target:"_blank",rel:"noopener noreferrer"}},[e._v("growi-docker-compose"),a("OutboundLink")],1),e._v(" is modified to the image that provided by official "),a("a",{attrs:{href:"https://www.docker.elastic.co/",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker.elastic.co"),a("OutboundLink")],1),e._v(" instead of "),a("a",{attrs:{href:"https://github.com/docker-library/elasticsearch/blob/6854914f0b890840c75b6db9eeaefbc26177df9c/5/Dockerfile",target:"_blank",rel:"noopener noreferrer"}},[e._v("docker-library/elasticsearch"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h2",{attrs:{id:"the-case-using-on-premise"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-case-using-on-premise"}},[e._v("#")]),e._v(" The case using on premise")]),e._v(" "),a("h3",{attrs:{id:"upgrade-node-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-node-js"}},[e._v("#")]),e._v(" Upgrade Node.js")]),e._v(" "),a("ol",[a("li",[e._v("Upgrade Node.js to v10")])]),e._v(" "),a("h3",{attrs:{id:"upgrade-mongodb"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-mongodb"}},[e._v("#")]),e._v(" Upgrade MongoDB")]),e._v(" "),a("ol",[a("li",[e._v("Upgrade MongoDB 3.6 or above")]),e._v(" "),a("li",[e._v("You do not need to migrate data")])]),e._v(" "),a("h3",{attrs:{id:"upgrade-elasticsearch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#upgrade-elasticsearch"}},[e._v("#")]),e._v(" Upgrade Elasticsearch")]),e._v(" "),a("ol",[a("li",[e._v("Upgrade Elasticsearch 6.6 or above and install plugins that were required so far\n"),a("ul",[a("li",[e._v("Since index data can be rebuilt from GROWI's management screen, it can be discarded.")])])])]),e._v(" "),a("h2",{attrs:{id:"the-case-using-growi-docker-compose"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-case-using-growi-docker-compose"}},[e._v("#")]),e._v(" The case using "),a("a",{attrs:{href:"https://github.com/growilabs/growi-docker-compose",target:"_blank",rel:"noopener noreferrer"}},[e._v("growi-docker-compose"),a("OutboundLink")],1)]),e._v(" "),a("ol",[a("li",[a("p",[e._v("Remove existing containers")]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Remove MongoDB, Elasticsearch containers")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker-compose")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" mongodb elasticsearch\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Remove Elasticsearch volumes")]),e._v(" "),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[e._v("DANGER")]),e._v(" "),a("p",[e._v("Please check the actual volume name with "),a("code",[e._v("docker volume ls")])])]),e._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" growi_es_data\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" volume "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("rm")]),e._v(" growi_es_plugins\n")])])])]),e._v(" "),a("li",[a("p",[e._v("Launch")])])]),e._v(" "),a("h2",{attrs:{id:"after-launching-growi"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#after-launching-growi"}},[e._v("#")]),e._v(" After launching GROWI")]),e._v(" "),a("ol",[a("li",[e._v('Re-build index on "Full Text Search management" page ('),a("code",[e._v("/admin/search")]),e._v(")")])])])}),[],!1,null,null,null);t.default=s.exports}}]);